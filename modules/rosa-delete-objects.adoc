// Module included in the following assemblies:
//
// * rosa_cli/rosa-manage-objects-cli.adoc

[id="rosa-delete-objects_{context}"]
= Delete objects

This section describes the `delete` commands for clusters and resources.

[id="rosa-delete-account-roles_{context}"]
== delete account-roles

Cleans up account roles from the current AWS account.

.Syntax
[source,terminal]
----
$ rosa delete account-roles
----

.Arguments
[cols="30,70"]
|===
|Option |Definition

|--classic
|Deletes classic account roles

|--delete-hcp-shared-vpc-policies
|Deletes the Hosted Control Plane shared vpc policies

|--hosted-cp
|Deletes Hosted Control Plane roles

a|-m, --mode string
a|How to perform the operation. Valid options are:

`auto`:: Resource changes will be applied automatically using the current AWS account.
`manual`:: Outputs the necessary commands to modify AWS resources will be output to be run manually.

|--prefix
|Prefix of the account roles to be deleted.

|===

include::snippets/rosa-cli-default-flags.adoc[]

.Example
Deletes all AWS account roles with the prefix of `mycluster`.

[source,terminal]
----
$ rosa delete account-roles -p mycluster
----

[id="rosa-delete-admin_{context}"]
== delete admin

Deletes a cluster administrator from a specified cluster.

.Syntax
[source,terminal]
----
$ rosa delete admin --cluster=<cluster_name> | <cluster_id>
----

.Arguments
[cols="30,70"]
|===
|Option |Definition

|--cluster
|Required: The name or ID (string) of the cluster that contains the identity provider (IDP) you want to delete.
|===

include::snippets/rosa-cli-default-flags.adoc[]

.Example
Deletes a cluster administrator from a cluster named `mycluster`.

[source,terminal]
----
$ rosa delete admin --cluster=mycluster
----

ifdef::openshift-rosa[]
[id="rosa-delete-autoscaler_{context}"]
== delete autoscaler

Deletes autoscaler configuration for a given cluster. 

[NOTE]
====
This action is only supported on {product-title} clusters with a self-hosted control plane. Clusters with hosted control planes do not support autoscaler.
====

.Syntax
[source,terminal]
----
$ rosa delete autoscaler --cluster=<cluster_name>
----

.Arguments
[cols="30,70"]
|===
|Option |Definition

|--cluster
|Required: The name or ID (string) of the cluster that has an autoscaler you want to delete.

|===

include::snippets/rosa-cli-default-flags.adoc[]

.Example
Deletes the autoscaler on a cluster named `mycluster`.

[source,terminal]
----
$ rosa delete autoscaler --cluster=mycluster
----
endif::openshift-rosa[]

[id="rosa-delete-cluster_{context}"]
== delete cluster

Deletes a cluster.

.Syntax
[source,terminal]
----
$ rosa delete cluster --cluster=<cluster_name> | <cluster_id> [arguments]
----

.Arguments
[cols="30,70"]
|===
|Option |Definition

|--cluster
|Required: The name or ID (string) of the cluster to delete.

|--watch
|Watches the cluster uninstallation logs.

|--best-effort
|Skips steps in the cluster destruction chain that are known to cause the cluster deletion process to fail. You should use this option with care and it is recommended that you manually check your AWS account for any resources that might be left over after using `--best-effort`.
|===

include::snippets/rosa-cli-default-flags.adoc[]

.Examples
Deletes a cluster named `mycluster`.

[source,terminal]
----
$ rosa delete cluster --cluster=mycluster
----

[id="rosa-delete-external-auth-provider_{context}"]
== delete external-auth-provider

Deletes an external authentication provider from a cluster.

.Syntax
[source,terminal]
----
$ rosa delete external-auth-provider <name_of_external_auth_provider> --cluster=<cluster_name> | <cluster_id> [arguments]
----

.Arguments
[cols="30,70"]
|===
|Option |Definition

|--cluster
|Required. The name or ID string of the cluster the external auth provider will be deleted from.
|===

include::snippets/rosa-cli-default-flags.adoc[]

.Example
Deletes an identity provider named `exauth-1` from a cluster named `mycluster`.

[source,terminal]
----
$ rosa delete external-auth-provider exauth-1 --cluster=mycluster
----

[id="rosa-delete-idp_{context}"]
== delete idp

Deletes a specific identity provider (IDP) from a cluster.

.Syntax
[source,terminal]
----
$ rosa delete idp --cluster=<cluster_name> | <cluster_id> [arguments]
----

.Arguments
[cols="30,70"]
|===
|Option |Definition

|--cluster
|Required: The name or ID (string) of the cluster from which the IDP will be deleted.
|===

include::snippets/rosa-cli-default-flags.adoc[]

.Example
Deletes an identity provider named `github` from a cluster named `mycluster`.

[source,terminal]
----
$ rosa delete idp github --cluster=mycluster
----

[id="rosa-delete-ingress_{context}"]
== delete ingress

Deletes a non-default application router (ingress) from a cluster.

.Syntax
[source,terminal]
----
$ rosa delete ingress --cluster=<cluster_name> | <cluster_id> [arguments]
----

.Arguments
[cols="30,70"]
|===
|Option |Definition

|--cluster
|Required: The name or ID (string) of the cluster from which the ingress will be deleted.
|===

include::snippets/rosa-cli-default-flags.adoc[]

.Examples
Deletes an ingress with the ID `a1b2` from a cluster named `mycluster`.

[source,terminal]
----
$ rosa delete ingress --cluster=mycluster a1b2
----

Deletes a secondary ingress with the subdomain name `apps2` from a cluster named `mycluster`.

[source,terminal]
----
$ rosa delete ingress --cluster=mycluster apps2
----

[id="rosa-delete-kubeletconfig_{context}"]
== delete kubeletconfig

Deletes a custom `KubeletConfig` object from a cluster.

.Syntax
[source,terminal]
----
$ rosa delete kubeletconfig --cluster=<cluster_name|cluster_id> [flags]
----

.Flags
[cols="30,70"]
|===
|Option |Definition

a|-c, --cluster <cluster_name>\|<cluster_id>
|Required. The name or ID of the cluster for which you want to delete the `KubeletConfig` object.

|--name
a|
ifdef::temp-ifdef[]
Optional.
endif::[]
ifdef::temp-ifdef[]
Required.
endif::[]
Specifies a name for the `KubeletConfig` object.

|===

include::snippets/rosa-cli-default-flags.adoc[]

[id="rosa-delete-machinepool_{context}"]
== delete machinepool

Deletes a machine pool from a cluster.

.Syntax
[source,terminal]
----
$ rosa delete machinepool --cluster=<cluster_name> | <cluster_id> <machine_pool_id>
----

.Arguments
[cols="30,70"]
|===
|Option |Definition

|--cluster
|Required: The name or ID (string) of the cluster that the machine pool will be deleted from.

|--machinepool string
|Machine pool of the cluster to target.

|===

include::snippets/rosa-cli-default-flags.adoc[]

.Example
Deletes the machine pool with the ID `mp-1` from a cluster named `mycluster`.

[source,terminal]
----
$ rosa delete machinepool --cluster=mycluster mp-1
----

[id="rosa-delete-ocm-role_{context}"]
== delete ocm-role

Deletes OCM role from the current AWS organization.

.Syntax
[source,terminal]
----
$ rosa delete ocm-role --role-arn <role_arn>
----

.Arguments
[cols="30,70"]
|===
|Option |Definition

a|-m, --mode string
a|How to perform the operation. Valid options are:

`auto`:: Resource changes will be applied automatically using the current AWS account.
`manual`:: Outputs the necessary commands to modify AWS resources will be output to be run manually.

|--role-arn string
|Required: The role ARN to delete from the user role from the AWS account

|===

include::snippets/rosa-cli-default-flags.adoc[]

.Examples
Deletes an ocm-role with `arn:aws:iam::123456789012:role/xxx-OCM-Role-1223456778` arn.

[source,terminal]
----
$ rosa delete ocm-role --role-arn arn:aws:iam::123456789012:role/xxx-OCM-Role-1223456778
----

[id="rosa-delete-oidc-config_{context}"]
== delete oidc-config

Deletes the OIDC config based on the registered OIDC Config ID.

.Syntax
[source,terminal]
----
$ rosa delete oidc-config --oidc-config-id <oidc_config_id>
----

.Arguments
[cols="30,70"]
|===
|Option |Definition

a|-m, --mode string
a|How to perform the operation. Valid options are:

`auto`:: Resource changes will be applied automatically using the current AWS account.
`manual`:: Outputs the necessary commands to modify AWS resources will be output to be run manually.

|--oidc-config-id string
|Required: Registered ID for identification of OIDC config.

|===

include::snippets/rosa-cli-default-flags.adoc[]

.Example
Deletes an OIDC config with an ID of `A1B2C3D4`.

[source,terminal]
----
$ rosa delete oidc-config --oidc-config-id A1B2C3D4
----

[id="rosa-delete-oidc-provider_{context}"]
== delete oidc-provider

Deletes the OIDC provider of a deleted STS cluster.

.Syntax
[source,terminal]
----
$ rosa delete oidc-provider --cluster=<cluster_name> | --oidc-config-id <oidc_config_id>
----

.Arguments
[cols="30,70"]
|===
|Option |Definition

|-c, --cluster string
|Name or ID of the cluster.

a|-m, --mode string
a|How to perform the operation. Valid options are:

`auto`:: Resource changes will be applied automatically using the current AWS account.
`manual`:: Outputs the necessary commands to modify AWS resources will be output to be run manually.

|--oidc-config-id string
|Required: Registered OIDC configuration ID to retrieve its issuer URL. Not to be used alongside `--cluster` flag.

|===

include::snippets/rosa-cli-default-flags.adoc[]

.Examples
* Deletes the OIDC provider using the OIDC config ID of `A1B2C3D4`.
+
[source,terminal]
----
$ rosa delete oidc-provider --oidc-config-id A1B2C3D4
----

* Deletes the OIDC provider using the cluster name of `mycluster`.
+
[source,terminal]
----
$ rosa delete oidc-provider --cluster=mycluster
----

[id="rosa-delete-operator-roles_{context}"]
== delete operator-roles

Deletes the Operator roles of a deleted STS cluster.

.Syntax
[source,terminal]
----
$ rosa delete oidc-provider --cluster=<cluster_name> | --oidc-config-id <oidc_config_id>
----

.Arguments
[cols="30,70"]
|===
|Option |Definition

|-c, --cluster string
|Name or ID of the cluster.

ifdef::openshift-rosa-hcp[]
|--delete-hcp-shared-vpc-policies
|Deletes the hosted control plane shared VPC policies.
endif::openshift-rosa-hcp[]

a|-m, --mode string
a|How to perform the operation. Valid options are:

`auto`:: Resource changes will be applied automatically using the current AWS account.
`manual`:: Outputs the necessary commands to modify AWS resources will be output to be run manually.

|--prefix string
|Operator role prefix. You must use this flag in case of reusable OIDC Config.

|===

include::snippets/rosa-cli-default-flags.adoc[]

.Example

Deletes the operator-roles on the cluster named `mycluster`.

[source,terminal]
----
$ rosa delete operator-roles --cluster=mycluster
----

[id="rosa-delete-tuning-configs_{context}"]
== delete tuning-configs

Deletes a specified tuning configuration that is on a specified cluster.

.Syntax
[source,terminal]
----
$ rosa delete tuning-config --cluster=<cluster_name> <tuning_config_name>
----

.Arguments
[cols="30,70"]
|===
|Option |Definition

|-c, --cluster string
|Name or ID of the cluster.

|===

include::snippets/rosa-cli-default-flags.adoc[]

.Example

Deletes the tuning config named `tuned1` from a cluster named `mycluster`.

[source,terminal]
----
$ rosa delete tuning-config --cluster=mycluster tuned1
----

[id="rosa-delete-upgrade_{context}"]
== delete upgrade

Cancels a scheduled cluster upgrade.

.Syntax
[source,terminal]
----
$ rosa delete upgrade
----

.Arguments
[cols="30,70"]
|===
|Option 
|Definition

|-c, --cluster string
|Name or ID of the cluster.

|--machinepool string
|Machine pool of the cluster to target.
|===

include::snippets/rosa-cli-default-flags.adoc[]

.Example
Deletes the user role that has a prefix of `rh-user` and a user-role name of `Auditor`.

[source,terminal]
----
$ rosa delete user-role --role-arn rh-user-User-Auditor-Role
----

[id="rosa-delete-user-role_{context}"]
== delete user-role

Deletes user role from the current AWS account.

.Syntax
[source,terminal]
----
$ rosa delete user-role
----

.Arguments
[cols="30,70"]
|===
|Option |Definition

a|-m, --mode string
a|How to perform the operation. Valid options are:

`auto`:: Resource changes will be applied automatically using the current AWS account.
`manual`:: Outputs the necessary commands to modify AWS resources will be output to be run manually.

|--role-arn string
|Required: The ARN of the user-role that you want to delete from the AWS account.

|===

include::snippets/rosa-cli-default-flags.adoc[]

.Example
Deletes the user role that has a prefix of `rh-user` and a user-role name of `Auditor`.

[source,terminal]
----
$ rosa delete user-role --role-arn rh-user-User-Auditor-Role
----