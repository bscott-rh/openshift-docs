// Module included in the following assemblies:
//
// * installing/installing_gcp/installing-gcp-account.adoc

:_mod-docs-content-type: REFERENCE
[id="gcp-xpn-firewall"]
= Firewall rules for shared VPC installations

If you install a cluster into a shared VPC using a service account with the minimal permissions, you must create the following GCP firewall rules.

[cols="3,3,3a,4",options="header"]
|===
|Source | Destination | Port | Function

|Computer that runs the installation program
|Bootstrap machine
|TCP 22
|SSH access for the installation program

|Computer that runs the installation program
|Control plane machines
|TCP 6443
|API services

|Computer that runs the installation program
|Control plane machines
|TCP 6080, 6443, 22624
|Health checks

|Control plane machines
|Control plane machines
|TCP 2379, 2380
|etcd

|All cluster machines
|Control plane machines
|TCP 10257, 10259, 22623
|Control plane services

|All cluster machines
|All cluster machines
|ICMP, ESP
|Intra-cluster communication

|All cluster machines
|All cluster machines
|
* UDP 500
* UDP 4500
* UDP 4789
* UDP 6081
* UDP 9000-9999
* UDP 30000-32767
|Intra-cluster communication

|All cluster machines
|All cluster machines
|
* TCP 22
* TCP 9000-9999
* TCP 10250
* TCP 30000-32767
|Intra-cluster communication
|===