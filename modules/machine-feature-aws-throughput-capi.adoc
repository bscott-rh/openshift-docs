// Module included in the following assemblies:
//
// * machine_management/cluster_api_machine_management/cluster_api_provider_configurations/cluster-api-config-options-aws.adoc

:_mod-docs-content-type: PROCEDURE
[id="machine-feature-aws-throughput-capi_{context}"]
= Configuring storage throughput for gp3 drives

[role="_abstract"]
You can configure the throughput of gp3 drives when configuring an {aws-short} compute machine set template. Increasing the throughput can improve performance for high traffic services.

include::snippets/apply-machine-configuration-method.adoc[tag=method-machine-template]

.Prerequisites

* You use gp3 storage volume(s).

.Procedure

* On the machine set template in which you want to configure throughput, add the `throughput` parameter:
+
[source,yaml]
----
apiVersion: infrastructure.cluster.x-k8s.io/v1beta2
kind: AWSMachineTemplate
# ...
spec:
  template:
    spec:
      nonRootVolumes:
      - deviceName: /dev/sdf
        encrypted: true
        iops: 4000
        size: 100
        throughput: <throughput_value>
        type: gp3
      rootVolume:
        encrypted: true
        iops: 4000
        size: 120
        throughput: <throughput_value>
        type: gp3
# ...
----
where:

`<throughput_value>`:: Specifies a value in MiB/s between 125 and 2,000. This value can only be modified on gp3 volumes. The default value is 125. You can set the throughput value for root volumes and non root volumes separately.